!function(o){"use strict";var t=o.module("moviecat",["moviecat.home_page","moviecat.details","moviecat.movie_list","moviecat.auto-active","ngRoute"]);t.controller("mainController",["$scope","$route",function(o,t){o.search=function(){console.log(123),t.updateParams({movieType:"search",q:o.query})}}])}(angular),function(o){"use strict";var t=o.module("moviecat.auto-active",[]);t.directive("autoActive",["$location",function(o){return{link:function(t,e,a){t.loca=o,t.$watch("loca.url()",function(o,t){var n=e.children()[0].href.split("#")[1];o.startsWith(n)&&(e.parent().children().removeClass(a.autoActive),e.addClass(a.autoActive))})}}}])}(angular),function(o){"use strict";var t=o.module("moviecat.jsonp",[]);t.service("MyService",["$window",function(o){this.jsonp=function(t,e,a){var n="&";e||(n="?");for(var i in e)n+=i+"="+e[i]+"&";t+=n;var r="myJsonp_"+o.Math.random().toString().substr(2);o[r]=a,t+="callback="+r;var l=o.document.createElement("script");l.src=t,o.document.body.appendChild(l)}}])}(angular),function(o){"use strict";var t=o.module("moviecat.details",["ngRoute","moviecat.jsonp"]);t.config(["$routeProvider",function(o){o.when("/details/:id",{templateUrl:"./details/view.html",controller:"detailsController"})}]),t.controller("detailsController",["$scope","$routeParams","MyService",function(o,t,e){e.jsonp("http://api.douban.com/v2/movie/subject/"+t.id,null,function(t){o.data=t,o.$apply()})}])}(angular),function(o){"use strict";var t=o.module("moviecat.home_page",["ngRoute"]);t.config(["$routeProvider",function(o){o.when("/home_page",{templateUrl:"./home_page/view.html",controller:"home_pageController"})}]),t.controller("home_pageController",["$scope",function(o){}])}(angular),function(o){"use strict";var t=o.module("moviecat.movie_list",["ngRoute","moviecat.jsonp"]);t.config(["$routeProvider",function(o){o.when("/:movieType/:page?",{templateUrl:"./movie_list/view.html",controller:"movie_listController"})}]),t.controller("movie_listController",["$scope","$http","$routeParams","$route","$window","MyService",function(o,t,e,a,n,i){console.log(e),o.loading=!1;var r=(e.page||"1")-0;o.page=r;var l=5*(r-1);i.jsonp("http://api.douban.com/v2/movie/"+e.movieType+"?q="+e.q,{start:l,count:5},function(t){o.data=t,o.total=t.total,o.totalPage=n.Math.ceil(o.total/t.count),o.loading=!0,o.$apply()}),o.getPage=function(t){t<=1||t>o.totalPage||a.updateParams({page:t})}}])}(angular);